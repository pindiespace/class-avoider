<!doctype html>

<html>

	<head>

		<meta charset="utf-8">

		<title>Avoider</title>

		<style>

			/* game styles here */

		</style>

	</head>

	<body>

		<header>

			<h1>Avoider</h1>

		</header>

		<section id="content">

			<div id="arena">

				<div id="critter"></div>

			</div>

		</section>

		<footer>

			<p>&copy; 2017 Vegan Meat market</p>

		</footer>

		<script>

			// Avoider code goes here

			var avoider = ( function () {

				var critter, arena;

				function makeArena () {

					console.log( "I'm in makeArena" );

					arena = document.getElementById( "arena" );

					console.log("arena is a:" + arena );

					arena.style.position = "relative"; // IMPORTANT! makes critter position relative to box, not window

					arena.style.width = "400px";

					arena.style.height = "400px";

					arena.style.border = "2px solid green";

				};

				function makeCritter ( arena ) {

					console.log("I'm in makeCritter");

					console.log("arena is a:" + arena)

					critter = document.getElementById( "critter" );

					critter.style.position = "absolute"; // IMPORANT! needed to make .style.top, .style.left work!

					critter.style.width = "50px";

					critter.style.height = "50px";

					critter.style.left = "0px";

					critter.style.top = "0px";

					critter.style.border = "2px solid red";

					critter.style.backgroundColor = "#343982";

					critter.onclick = function () {

						console.log ('i was clicked');

						console.log( "arena width:" + arena.style.width );
						console.log( "arena height:" + arena.style.height );

						// TODO: critter may jump partly out of the screen. Subtract its size width from randX and height from randY

						var randX = Math.random() * parseInt( arena.style.width ) + 'px';
						var randY = Math.random() * parseInt( arena.style.height ) + 'px';

						console.log( "randX is:" + randX );
						console.log( "randY is:" + randY );

						console.log( "critter left:" + critter.style.left );
						console.log( "critter top:" + critter.style.top );

						critter.style.left = randX;
						critter.style.top = randY;

						console.log( "critter new left:" + critter.style.left );
						console.log( "critter new top:" + critter.style.top );

					}

				};

				function checkIfCritterClicked () {

					//console.log("I'm in checkIfCritterClicked");

				};

				function gameLoop () {

					checkIfCritterClicked();

					requestAnimationFrame( gameLoop );

				};

				function init () {

					console.log( "I'm in init" );

					makeArena();

					makeCritter( arena );

					gameLoop();

				};

				return {

					init: init

				};

			} ) ();

			avoider.init();


		</script>

	</body>

</html>